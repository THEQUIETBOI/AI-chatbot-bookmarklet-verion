<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=2.0" />
<style>
.UI .chat-container {
    width: 300px;
    height: 400px;
    position: relative;
    resize: both;
    min-width: 200px;
    min-height: 300px;
    overflow: hidden;
    border: 3px solid #ff0000;
    background: white;

}


.UI .chat-container.hidden {
    opacity: 0;
    pointer-events: none;
}

div .chat {
    height: calc(100% - 40px);
    overflow-y: auto;
    padding: 10px;
    background-color: gray;

}

div .text {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40px;
    background: white;

}

#whyy {
    width: 100%;
    height: 100%;
    border: none;
    padding: 5px;

}

.UI .main-container {
position: fixed;
border: solid 5px #0bd365;
border-radius: 10px;
}


.UI .main-container.hidden {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}
p .botmessage {
    font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: wheat;
    background-color: #201c1c;
    border-radius: 20px;
    line-height: 1.4;
    padding: 10px 15px;
    max-width: 80%;
}


div .code-wrapper {
    background: #383636;
    border-radius: 4px;
    padding: 12px;
    margin: 8px 0;
    overflow-x: auto;
}

code .code-wrapper {
    font-family: 'Consolas', monospace;
    color: #d4d4d4;
    font-size: 14px;
}

pre .code-wrapper {
    margin: 0;
    background-color: #201c1c;
}

.UI .button-container {
    background-color: black;
position:relative;
width: 82%
}
</style>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <div class="UI main-container ">


      <div class=" UI button-container">


        <button id="move" disabled>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            fill="#000000"
            version="1.1"
            id="Capa_1"
            width="20px"
            height="20px"
            viewBox="0 0 572.156 572.156"
            xml:space="preserve"
          >
            <g>
              <polygon
                points="495.405,241.769 418.657,197.457 418.657,258.115 314.042,258.115 314.042,153.498 374.699,153.498    330.389,76.751 286.078,0 241.769,76.751 197.457,153.498 258.115,153.498 258.115,258.115 153.498,258.115 153.498,197.457    76.751,241.767 0,286.078 76.751,330.387 153.498,374.699 153.498,314.042 258.115,314.042 258.115,418.657 197.457,418.657    241.767,495.405 286.078,572.156 330.387,495.405 374.699,418.657 314.042,418.657 314.042,314.042 418.657,314.042    418.657,374.699 495.405,330.389 572.156,286.078  "
              />
            </g>
          </svg>
        </button>
        <button id="hide" disabled>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            fill="#000000"
            height="20px"
            width="20px"
            version="1.1"
            id="Capa_1"
            viewBox="0 0 52.161 52.161"
            xml:space="preserve"
          >
            <g>
              <path
                d="M52.161,26.081c0,3.246-2.63,5.875-5.875,5.875H5.875C2.63,31.956,0,29.327,0,26.081l0,0c0-3.245,2.63-5.875,5.875-5.875   h40.411C49.531,20.206,52.161,22.835,52.161,26.081L52.161,26.081z"
              />
            </g>
          </svg>
        </button>
<button id="key"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="20px" width="20px" version="1.1" id="Layer_1" viewBox="0 0 485.017 485.017" xml:space="preserve">
    <g>
        <path d="M361.205,68.899c-14.663,0-28.447,5.71-38.816,16.078c-21.402,21.403-21.402,56.228,0,77.631   c10.368,10.368,24.153,16.078,38.815,16.078s28.447-5.71,38.816-16.078c21.402-21.403,21.402-56.228,0-77.631   C389.652,74.609,375.867,68.899,361.205,68.899z M378.807,141.394c-4.702,4.702-10.953,7.292-17.603,7.292   s-12.901-2.59-17.603-7.291c-9.706-9.706-9.706-25.499,0-35.205c4.702-4.702,10.953-7.291,17.603-7.291s12.9,2.589,17.603,7.291   C388.513,115.896,388.513,131.688,378.807,141.394z"/>
        <path d="M441.961,43.036C414.21,15.284,377.311,0,338.064,0c-39.248,0-76.146,15.284-103.897,43.036   c-42.226,42.226-54.491,105.179-32.065,159.698L0.254,404.584l-0.165,80.268l144.562,0.165v-55.722h55.705l0-55.705h55.705v-64.492   l26.212-26.212c17.615,7.203,36.698,10.976,55.799,10.976c39.244,0,76.14-15.282,103.889-43.032   C499.25,193.541,499.25,100.325,441.961,43.036z M420.748,229.617c-22.083,22.083-51.445,34.245-82.676,34.245   c-18.133,0-36.237-4.265-52.353-12.333l-9.672-4.842l-49.986,49.985v46.918h-55.705l0,55.705h-55.705v55.688l-84.5-0.096   l0.078-37.85L238.311,208.95l-4.842-9.672c-22.572-45.087-13.767-99.351,21.911-135.029C277.466,42.163,306.83,30,338.064,30   c31.234,0,60.598,12.163,82.684,34.249C466.34,109.841,466.34,184.025,420.748,229.617z"/>
    </g>
    </svg></button>
      </div>

      <div class="UI chat-container">
        <div class="chat">
          <div class="conversation">
          </div>
        </div>
        <div class="text">
          <input type="text" id="whyy" />
        </div>
      </div>
    </div>




















<script>
    document.addEventListener("DOMContentLoaded", () => {
  const input = document.getElementById("input");
  const mainContainer = document.querySelector(".main-container");
  const moveButton = document.getElementById("move");
  const chat = document.getElementById("chat");
  let isDragging = false;
  let offsetX, offsetY;

  input.addEventListener("keydown", async (e) => {
    if (e.key === "Enter") {
      const key = localStorage.getItem("key");
      if (key === null) {
        localStorage.removeItem("key");
        alert("Please enter your API key in the settings.");
        const keys = prompt("enter your API key");
localStorage.setItem("key", keys);
        return;
      }
      const userInput = input.value;
      if (key) {
        await fetch(
          "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" +
            localStorage.getItem("key"),
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              contents: [
                {
                  parts: [{ text: userInput }]
                }
              ]
            })
          }
        )
          .then((response) => response.json())
          .then((data) => {
            if (
              data.candidates &&
              data.candidates.length > 0 &&
              data.candidates[0].content
            ) {
              // Convert response to string and clean it
              const botResponse = data.candidates[0].content.parts[0].text
                .toString()
                .trim();
              // Create user message
              const userMessage = document.createElement("p");
              userMessage.className = "userMessage";
              userMessage.textContent = `You: ${userInput}`;
              chat.appendChild(userMessage);

              // Create bot message
              const botMessage = document.createElement("p");
              botMessage.className = "botMessage";
              const parsedResponse = marked.parse(botResponse);

              if (parsedResponse.includes("<code>")) {
                  // Create a div to wrap code elements
                  const codeWrapper = document.createElement("div");
                  codeWrapper.className = "code-wrapper";
                  codeWrapper.innerHTML = parsedResponse;
                  botMessage.innerHTML = "Bot: ";
                  botMessage.appendChild(codeWrapper);
              } else {
                  botMessage.innerHTML = "Bot: " + parsedResponse;
              }
              chat.appendChild(botMessage);

              // Clear input
              input.value = "";

              // Scroll to bottom
              chat.scrollTop = chat.scrollHeight;
            }
          })
         
          
      }
      
    }
  });

  function handlePointerDown(e) {
    e.preventDefault();
    isDragging = true;

    if (e.type === "touchstart") {
      offsetX = e.touches[0].clientX - mainContainer.offsetLeft;
      offsetY = e.touches[0].clientY - mainContainer.offsetTop;
    } else {
      offsetX = e.clientX - mainContainer.offsetLeft;
      offsetY = e.clientY - mainContainer.offsetTop;
    }

    document.addEventListener("mousemove", handlePointerMove);
    document.addEventListener("touchmove", handlePointerMove);
    document.addEventListener("mouseup", handlePointerUp);
    document.addEventListener("touchend", handlePointerUp);
    document.addEventListener("mouseleave", handlePointerUp);
  }

  function handlePointerMove(e) {
    if (!isDragging) return;

    let x, y;
    if (e.type === "touchmove") {
      x = e.touches[0].clientX - offsetX;
      y = e.touches[0].clientY - offsetY;
    } else {
      x = e.clientX - offsetX;
      y = e.clientY - offsetY;
    }

    mainContainer.style.left = `${x}px`;
    mainContainer.style.top = `${y}px`;
  }

  function handlePointerUp() {
    isDragging = false;
    document.removeEventListener("mousemove", handlePointerMove);
    document.removeEventListener("touchmove", handlePointerMove);
    document.removeEventListener("mouseup", handlePointerUp);
    document.removeEventListener("touchend", handlePointerUp);
    document.removeEventListener("mouseleave", handlePointerUp);
  }

  moveButton.addEventListener("mousedown", handlePointerDown);
  moveButton.addEventListener("touchstart", handlePointerDown);
  const hide = document.getElementById("hide");
  document.addEventListener("keydown", (e) => {
    if (e.key.toLowerCase() === "e") {
      if (document.activeElement !== input) {
        mainContainer.classList.toggle("hidden");
      }
    }
  });
 


  const key = document.getElementById("key")
  key.addEventListener("click", () => {
const ee = prompt("enter your API key");
localStorage.setItem("key", ee);
  });
});

</script>  </body>
</html>
